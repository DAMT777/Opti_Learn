/* Sidebar como overlay (no afecta el layout) */
.overlay-backdrop{ position:fixed; inset:0; background: transparent; backdrop-filter: none; opacity:0; pointer-events:none; transition: opacity .25s ease; }
.overlay-sidebar{
  position:fixed; inset:0 auto 0 0; width: 320px; max-width: 88vw;
  background:
    radial-gradient(140% 60% at -10% -10%, rgba(255,255,255,.06), transparent 40%),
    linear-gradient(180deg, #0f2546, #133a6f 50%, #0f2f5b);
  color:#cfd9e6; border-right:1px solid rgba(255,255,255,.08);
  /* sin sombra para no oscurecer el chat */
  box-shadow: none;
  transform: translateX(-100%);
  transition: transform .28s ease;
  display:flex; flex-direction:column; z-index:1050;
}
body.theme-light .overlay-sidebar{
  background:
    radial-gradient(140% 60% at -10% -10%, rgba(0,0,0,.04), transparent 40%),
    linear-gradient(180deg, #eaf3ff, #dceaff 50%, #d3e4ff);
  color:#0b2a4a; border-right:1px solid rgba(0,0,0,.06);
}

.overlay-header{ padding-top: 14px !important; padding-bottom: 12px !important; }
.overlay-header .brand{ font-weight: 600; letter-spacing:.2px; }
.overlay-header #menuClose{ width:32px; height:32px; border-radius:12px; padding:0; display:inline-flex; align-items:center; justify-content:center;
  background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); color:#bcd5ff; }
body.theme-light .overlay-header #menuClose{ background: rgba(0,0,0,.04); border:1px solid rgba(0,0,0,.08); color:#2d5fb8; }
.overlay-sep{ border-color: rgba(255,255,255,.08); }
body.theme-light .overlay-sep{ border-color: rgba(0,0,0,.06); }
.overlay-body{ flex:1 1 auto; min-height:0; overflow:auto; }
.overlay-body{ scrollbar-width: thin; scrollbar-color: var(--scroll-thumb) var(--scroll-track); }
.overlay-body::-webkit-scrollbar{ width: 10px; height: 10px; }
.overlay-body::-webkit-scrollbar-track{ background: var(--scroll-track); border-radius: 8px; }
.overlay-body::-webkit-scrollbar-thumb{ background-color: var(--scroll-thumb); border-radius: 8px; border: 2px solid transparent; background-clip: padding-box; }
.overlay-body::-webkit-scrollbar-thumb:hover{ background-color: var(--scroll-thumb-hover); }
.overlay-sidebar .nav-vertical{ margin: 8px 0 12px; padding: 2px 0; }
.overlay-sidebar .nav-vertical li{ margin-bottom: 8px; }
.overlay-sidebar .item-link{ display:block; padding: 11px 12px; border-radius: 12px; color: inherit; text-decoration:none;
  background: rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.08);
  transition: background .15s ease, transform .06s ease, box-shadow .2s ease; }
.overlay-sidebar .item-link:hover{ background: rgba(255,255,255,.07); box-shadow: inset 2px 0 0 rgba(33,133,228,.75); }
.overlay-sidebar .item-link:active{ transform: translateY(1px); }
body.theme-light .overlay-sidebar .item-link{ background: rgba(0,0,0,.035); border:1px solid rgba(0,0,0,.08); }
body.theme-light .overlay-sidebar .item-link:hover{ background: rgba(0,0,0,.055); box-shadow: inset 2px 0 0 rgba(33,133,228,.85); }
.overlay-footer{ border-top: 1px solid rgba(255,255,255,.08); }
body.theme-light .overlay-footer{ border-top: 1px solid rgba(0,0,0,.06); }

/* Estado abierto */
/* Mostrar backdrop pero no bloquear scroll/gestos de la conversación */
body.menu-open .overlay-backdrop{ opacity:1; pointer-events:none; }
body.menu-open .overlay-sidebar{ transform: translateX(0); }
/* Desplazamiento sutil del contenido cuando el menú está abierto */
body.menu-open { --side-shift: clamp(8px, calc(var(--side-width) * .08), 24px); }
body.menu-open .app-shell{ margin-left: var(--side-shift); width: calc(100% - var(--side-shift)); }
body.menu-open { --chat-input-max: 92vw; }
body.menu-open #chat{ transform: none; }
body.menu-open .chat-footer{ transform: none; }

/* Neutralizar efectos cuando el overlay no existe */
body.menu-open .app-shell{ margin-left: 0 !important; width: 100% !important; }
body.menu-open #chat{ transform: none; }
