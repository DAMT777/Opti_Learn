/* Input de chat */
.chat-input{ display:flex; align-items:center; gap:8px; border-radius:18px; padding:0 10px; min-height: 44px; }
/* Centrar y limitar ancho de la barra de mensaje */
.chat-footer{ justify-content: center; }
.chat-footer .chat-input{
  box-sizing: border-box;
  flex: 0 0 auto !important; /* forzar a no crecer aunque tenga flex-grow-1 */
  width: min(var(--chat-input-width), var(--chat-input-max)) !important;
  max-width: min(var(--chat-input-width), var(--chat-input-max)) !important;
  margin: 0 auto;
  min-height: var(--chat-input-height);
  border-radius: var(--chat-input-radius);
}
/* Estilo pill del input */
.chat-footer .chat-input .form-control{ height: calc(var(--chat-input-height) - 8px); line-height: calc(var(--chat-input-height) - 8px); min-height: 0; }
.chat-footer .prefix-btn{ width:34px; height:34px; border-radius: 10px; display:inline-flex; align-items:center; justify-content:center; margin-right:6px; background: transparent; border: none; color: rgba(255,255,255,.75); }
body.theme-light .chat-footer .prefix-btn{ color:#365a93; }
/* Oscuro: mismo tono exacto que el fondo pero con contorno sutil */
body.theme-dark .chat-input{
  background: var(--d-surface);
  border:1px solid var(--chat-border-dark) !important;
  box-shadow:
    0 0 0 1px color-mix(in srgb, var(--chat-border-dark) 35%, transparent) inset,
    0 2px 12px rgba(0,0,0,.25);
}
/* Texto del input con alto contraste (incluye focus) */
.chat-input input,
.chat-input input:focus,
.chat-input input:not(:placeholder-shown){
  color:#e8f0ff !important;
  -webkit-text-fill-color:#e8f0ff;
  background:transparent;
  caret-color:#e8f0ff;
}
.chat-input input::placeholder{ color: rgba(255,255,255,.55); }
/* Claro: fondo claro con borde sutil */
body.theme-light .chat-input{
  background:#eef3fb;
  border:1px solid var(--chat-border-light) !important;
  box-shadow:
    0 0 0 1px color-mix(in srgb, var(--chat-border-light) 45%, transparent) inset,
    0 2px 10px rgba(0,0,0,.08);
}

/* Resaltar cuando el input tiene foco */
.chat-footer .chat-input:focus-within{
  border-color: color-mix(in srgb, var(--chat-border-dark) 65%, #3378e0);
  box-shadow:
    0 0 0 2px color-mix(in srgb, var(--chat-border-dark) 30%, #2d6bd1, 30%) inset,
    0 2px 14px rgba(0,0,0,.28);
}
body.theme-light .chat-footer .chat-input:focus-within{
  border-color: color-mix(in srgb, var(--chat-border-light) 80%, #3a77d8);
  box-shadow:
    0 0 0 2px color-mix(in srgb, var(--chat-border-light) 40%, #3a77d8, 25%) inset,
    0 2px 12px rgba(0,0,0,.12);
}
/* Alto contraste en modo claro (incluye focus y cuando hay texto) */
body.theme-light .chat-input input,
body.theme-light .chat-input input:focus,
body.theme-light .chat-input input:not(:placeholder-shown){
  color:#0b2a4a !important;
  -webkit-text-fill-color:#0b2a4a;
  background:transparent;
  caret-color:#0b2a4a;
}
body.theme-light .chat-input input::placeholder{ color:#6e7f99; }
.is-empty .chat-input{ width: min(var(--chat-input-width), var(--chat-input-max)) !important; max-width: min(var(--chat-input-width), var(--chat-input-max)) !important; margin: 0 auto !important; flex: 0 0 auto !important; }
.send-inline{ width:36px; height:36px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; margin-left:8px; margin-right:4px; }
